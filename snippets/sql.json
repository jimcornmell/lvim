{
  "select_find_constraint_links": {
    "prefix": "Find constraint links",
    "body": [
      "SELECT",
      "  TABLE_NAME, COLUMN_NAME, CONSTRAINT_NAME, REFERENCED_TABLE_NAME, REFERENCED_COLUMN_NAME",
      "FROM",
      "  INFORMATION_SCHEMA.KEY_COLUMN_USAGE",
      "WHERE",
      "  REFERENCED_TABLE_NAME LIKE '%name_of_table%';"
    ],
    "description": "select_find_constraint_links"
  },
  "showp": {
    "prefix": "Show processes",
    "body": [
      "SHOW processlist;",
      "SHOW FULL processlist;"
    ],
    "description": "showp"
  },
  "mysql drop fk checks": {
    "prefix": "mysql",
    "body": [
      "SET FOREIGN_KEY_CHECKS=0; -- to disable them",
      "DROP SCHEMA suppliers;",
      "SET FOREIGN_KEY_CHECKS=1; -- to re-enable them"
    ],
    "description": "mysql drop fk checks"
  },
  "Create DB": {
    "prefix": "createdb",
    "body": [
      "-- Create a new database called '${1:DatabaseName}'",
      "CREATE DATABASE ${1:DatabaseName};"
    ],
    "description": "Create a new database"
  },
  "List databases": {
    "prefix": "databaseslist",
    "body": [
      "-- Get a list of databases",
      "SELECT datname FROM pg_database",
      "WHERE datistemplate = false;"
    ],
    "description": "List PostgreSQL databases"
  },
  "Create table": {
    "prefix": "table",
    "body": [
      "CREATE TABLE subject (",
      "    id INTEGER PRIMARY KEY,",
      "    shortname varchar(32) NOT NULL UNIQUE,",
      "    fullname varchar(128),",
      "    description TEXT,",
      "    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,",
      "    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,",
      ");",
      "",
      "CREATE INDEX shortname_index ON subject (shortname);"
    ],
    "description": "Create a table"
  },
  "Title": {
    "prefix": "table",
    "body": [
      "CREATE TABLE subject",
      "(",
      "    id INTEGER PRIMARY KEY,",
      "    shortname varchar(32) NOT NULL UNIQUE,",
      "    fullname varchar(128),",
      "    description TEXT,",
      "    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,",
      "    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,",
      "    INDEX shortname_index (shortname) # MySQL only",
      ");",
      "",
      "CREATE INDEX shortname_index ON subject (shortname);",
      "",
      "CREATE TABLE grade",
      "(",
      "    id INTEGER PRIMARY KEY,",
      "    student_id INTEGER NOT NULL,",
      "    teacher_id INTEGER NOT NULL,",
      "    subject_id INTEGER NOT NULL,",
      "    value DECIMAL(1, 1),",
      "    comment TEXT DEFAULT '-',",
      "    created_at TIMESTAMP,",
      "    updated_ar TIMESTAMP,",
      "    INDEX student_id_index (student_id), # MySQL only",
      "    INDEX teacher_id_index (teacher_id), # MySQL only",
      "    INDEX subject_id_index (subject_id) # MySQL only",
      ");",
      "",
      "CREATE INDEX grade_student_id_index ON grade (student_id);",
      "CREATE INDEX grade_teacher_id_index ON grade (teacher_id);",
      "CREATE INDEX grade_subject_id_index ON grade (subject_id);",
      "",
      "DROP INDEX grade_student_id_index;",
      "DROP INDEX grade_teacher_id_index;",
      "DROP INDEX grade_subject_id_index;",
      "",
      "CREATE TABLE student_homework",
      "(",
      "    student_id INTEGER,",
      "    homework_id INTEGER,",
      "    PRIMARY KEY (student_id, homework_id),",
      "    INDEX student_homework_index (student_id, homework_id) # MySQL only",
      ");",
      "",
      "CREATE INDEX student_homework_index ON student_homework (student_id, homework_id);",
      "",
      "DROP INDEX student_homework_index;",
      "",
      "ALTER TABLE student ADD COLUMN user_id INTEGER;",
      "ALTER TABLE student ADD user_id INTEGER; # only MySQL and PostgreSQL",
      "ALTER TABLE student DROP COLUMN user_id;",
      "",
      "ALTER TABLE student RENAME COLUMN description TO about;",
      "ALTER TABLE student CHANGE COLUMN description TO about; # for MySQL",
      "",
      "ALTER TABLE user ALTER COLUMN login SET NOT NULL; # only PostgreSQL",
      "ALTER TABLE user ALTER COLUMN login DROP NOT NULL; # only PostgreSQL",
      "",
      "ALTER TABLE user ALTER COLUMN email SET DEFAULT 'user@domain.com'; # only MySQL and PostgreSQL",
      "ALTER TABLE user ALTER COLUMN email DROP DEFAULT; # only MySQL and PostgreSQL",
      "",
      "ALTER TABLE student ADD CONSTRAINT student_pkey PRIMARY KEY (id);",
      "ALTER TABLE student DROP CONSTRAINT student_pkey;",
      "ALTER TABLE student DROP PRIMARY KEY; # no PostgreSQL",
      "",
      "ALTER TABLE user ADD CONSTRAINT user_credentials_uniq UNIQUE (login, email);",
      "ALTER TABLE user DROP CONSTRAINT user_credentials_uniq;",
      "",
      "ALTER TABLE student RENAME TO pupil;",
      "",
      "",
      "CREATE SEQUENCE subject_id_seq;",
      "",
      "ALTER TABLE subject ALTER id SET DEFAULT NEXTVAL('subject_id_seq');",
      "",
      "INSERT INTO subject ",
      "    (shortname, fullname)",
      "VALUES ",
      "    ('Astronomy', 'Astronomy');",
      "",
      "INSERT INTO subject",
      "VALUES",
      "    (DEFAULT, 'Biology', 'Biology');",
      "",
      "INSERT INTO subject",
      "SET id = DEFAULT, shortname = 'Georgaphy', fullname = 'Geography'; # only MySQL",
      "",
      "INSERT INTO subject (id, shortname, fullname, description, created_at, updated_at) VALUES",
      "(1, 'Astronomy', 'Astronomy', 'Astronomy is a natural science which is the study of celestial objects (such as stars, galaxies, planets, moons, asteroids, comets and nebulae), the physics, chemistry, and evolution of such objects, and phenomena that originate outside the atmosphere of Earth, including supernovae explosions, gamma ray bursts, and cosmic microwave background radiation.', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),",
      "(2, 'Biology', 'Biology', 'Biology is a natural science concerned with the study of life and living organisms, including their structure, function, growth, evolution, distribution, and taxonomy.[1] Modern biology is a vast and eclectic field, composed of many branches and subdisciplines. However, despite the broad scope of biology, there are certain general and unifying concepts within it that govern all study and research, consolidating it into single, coherent fields. In general, biology recognizes the cell as the basic unit of life, genes as the basic unit of heredity, and evolution as the engine that propels the synthesis and creation of new species. It is also understood today that all organisms survive by consuming and transforming energy and by regulating their internal environment to maintain a stable and vital condition.', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),",
      "(3, 'Chemistry', 'Chemistry', 'Chemistry is a branch of physical science that studies the composition, structure, properties and change of matter. In this realm, chemistry deals with such topics as the properties of individual atoms, the manner in which atoms form chemical bonds in the formation of compounds, the interactions of substances through intermolecular forces to give matter its general properties, and the interactions between substances through chemical reactions to form different substances.', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),",
      "(4, 'Geography', 'Geography', 'Geography is a field of science dedicated to the study of the lands, the features, the inhabitants, and the phenomena of Earth.', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),",
      "(5, 'History', 'History', 'History is the study of the past, particularly how it relates to humans. It is an umbrella term that relates to past events as well as the memory, discovery, collection, organization, presentation, and interpretation of information about these events. Scholars who write about history are called historians. Events occurring prior to written record are considered prehistory.', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),",
      "(6, 'Physics', 'Physics', 'Physics is the natural science that involves the study of matter and its motion through space and time, along with related concepts such as energy and force. More broadly, it is the general analysis of nature, conducted in order to understand how the universe behaves.', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);",
      "",
      "UPDATE subject ",
      "SET description = '---';",
      "",
      "UPDATE subject ",
      "SET id = 2, shortname = 'Georgaphy', fullname = 'Geography', updated_at = CURRENT_TIMESTAMP",
      "WHERE id = 3;",
      "",
      "DELETE FROM subject ",
      "WHERE id = 4;",
      "",
      "DELETE FROM subject;",
      "",
      "",
      "## Using data from tables",
      "",
      "SELECT * FROM subject;",
      "",
      "SELECT id, shortname, fullname, created_at ",
      "FROM subject",
      "ORDER BY shortname;",
      "SELECT id, shortname, fullname, created_at ",
      "FROM subject",
      "WHERE id <> 3;",
      "WHERE id NOT IN(2, 4, 6);",
      "WHERE description IS NULL;",
      "WHERE description IS NOT NULL;",
      "WHERE shortname LIKE '%y';",
      "WHERE shortname NOT LIKE '%y';",
      "AND shortname LIKE '%ry';",
      "OR shortname = 'Physics';",
      "",
      "SELECT name, surname, pesel FROM students_humanistics",
      "UNION    ",
      "SELECT name, surname, pesel FROM students_science;",
      "",
      "SELECT name, surname, pesel FROM students_humanistics",
      "UNION ALL",
      "SELECT name, surname, pesel FROM students_science;",
      "",
      "SELECT name, surname, pesel FROM students_humanistics",
      "INTERSECT",
      "SELECT name, surname, pesel FROM students_science;",
      "",
      "SELECT name, surname, pesel FROM students_humanistics",
      "INTERSECT ALL",
      "SELECT name, surname, pesel FROM students_science;",
      "",
      "SELECT name, surname, pesel FROM students_humanistics",
      "EXCEPT       ",
      "SELECT name, surname, pesel FROM students_science;",
      "",
      "SELECT name, surname, pesel FROM students_humanistics",
      "EXCEPT ALL",
      "SELECT name, surname, pesel FROM students_science;",
      "INSERT INTO employees_salaries (employee_id, salary) VALUES",
      "(1, 8200.00),",
      "(2, 5400.00),",
      "(19, 6200.00);"
    ],
    "description": "Longer description"
  }
}
